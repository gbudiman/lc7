; *** __global
; STORES "ifminus returns " l1
; STORES "ifdiv returns " l2
; STORES "dividing " l3
; STORES "c" vc
; STORES "multiplier" vm
; STORES " + " plus
; STORES " - " minus
; STORES " / " divide
; STORES " = " equal
; STORES " " space
; STORES "\n" eol
; *** ifminus
; Generating code for function ifminus
; LABEL ifminus
; LINK
; WRITES vc
; WRITES equal
; WRITEF $P2
; WRITES space
; WRITES vm
; WRITES equal
; WRITEF multiplier
; WRITES eol
; GEQF $P2 multiplier LABEL1
; SUBF $P0 $P1 $T0
; STOREF $T0 $L0
; WRITES l1
; WRITEF $P0
; WRITES minus
; WRITEF $P1
; WRITES equal
; WRITEF $L0
; WRITES eol
; JUMP LABEL0
; LABEL LABEL1
; SUBF $P1 $P0 $T1
; STOREF $T1 $L0
; WRITES l1
; WRITEF $P1
; WRITES minus
; WRITEF $P0
; WRITES equal
; WRITEF $L0
; WRITES eol
; LABEL LABEL0
; STOREF $L0 $R
; RET
; *** ifdiv
; Generating code for function ifdiv
; LABEL ifdiv
; LINK
; LABEL LABEL2
; WRITEF $P0
; WRITES divide
; WRITEF $P1
; WRITES plus
; WRITEF multiplier
; WRITES equal
; DIVF $P0 $P1 $T2
; ADDF $T2 multiplier $T3
; STOREF $T3 $P0
; WRITEF $P0
; WRITES eol
; STOREI 1 $T4
; SUBI $P2 $T4 $T5
; STOREI $T5 $P2
; STOREF 2.0 $T6
; DIVF $P1 $T6 $T7
; STOREF $T7 $P1
; STOREI 0 $T8
; LEQ $P2 $T8 LABEL4
; JUMP LABEL2
; LABEL LABEL4
; WRITES l2
; WRITES equal
; WRITEF $P0
; WRITES eol
; STOREF $P0 $R
; RET
; *** main
; Generating code for function main
; LABEL main
; LINK
; STOREI 9 $T9
; STOREF $T9 multiplier
; STOREI 8 $T10
; STOREI 7 $T11
; STOREI 5 $T12
; PUSH
; PUSH $T10
; PUSH $T11
; PUSH $T12
; JSR ifminus
; POP
; POP
; POP
; POP $T13
; STOREF 18.0 $T14
; STOREF 7.8 $T15
; STOREI 8 $T16
; PUSH
; PUSH $T14
; PUSH $T15
; PUSH $T16
; JSR ifdiv
; POP
; POP
; POP
; POP $T17
; MULTI $T13 $T17 $T18
; STOREF $T18 $L2
; WRITEF $L2
; STOREI 0 $T19
; STOREI $T19 $R
; RET
str l1 "ifminus returns "
str l2 "ifdiv returns "
str l3 "dividing "
str vc "c"
str vm "multiplier"
str plus " + "
str minus " - "
str divide " / "
str equal " = "
str space " "
str eol "\n"
var multiplier
push
push r0
push r1
push r2
push r3
jsr main
sys halt
;Parsing: MAKESPACE 1
;Parsing: MAKEPARAM 0
;Parsing: MAKESPACE 1
;Parsing: MAKEPARAM 3
;Parsing: Generating code for function ifminus
;Parsing: LABEL ifminus
label ifminus
link 1
;Parsing: LINK
;Parsing: WRITES vc
sys writes vc
;Parsing: WRITES equal
sys writes equal
;Parsing: WRITEF $P2
sys writer $6
;Parsing: WRITES space
sys writes space
;Parsing: WRITES vm
sys writes vm
;Parsing: WRITES equal
sys writes equal
;Parsing: WRITEF multiplier
sys writer multiplier
;Parsing: WRITES eol
sys writes eol
;Parsing: GEQF $P2 multiplier LABEL1
move multiplier r0
cmpr $6 r0
jge LABEL1
;Parsing: SUBF $P0 $P1 $T0
move $8 r1
subr $7 r1
;Parsing: STOREF $T0 $L0
move r1 $-1
;Parsing: WRITES l1
sys writes l1
;Parsing: WRITEF $P0
sys writer $8
;Parsing: WRITES minus
sys writes minus
;Parsing: WRITEF $P1
sys writer $7
;Parsing: WRITES equal
sys writes equal
;Parsing: WRITEF $L0
sys writer $-1
;Parsing: WRITES eol
sys writes eol
;Parsing: JUMP LABEL0
jmp LABEL0
;Parsing: LABEL LABEL1
label LABEL1
;Parsing: SUBF $P1 $P0 $T1
move $7 r2
subr $8 r2
;Parsing: STOREF $T1 $L0
move r2 $-1
;Parsing: WRITES l1
sys writes l1
;Parsing: WRITEF $P1
sys writer $7
;Parsing: WRITES minus
sys writes minus
;Parsing: WRITEF $P0
sys writer $8
;Parsing: WRITES equal
sys writes equal
;Parsing: WRITEF $L0
sys writer $-1
;Parsing: WRITES eol
sys writes eol
;Parsing: LABEL LABEL0
label LABEL0
;Parsing: STOREF $L0 $R
move $-1 r3
move r3 $9
;Parsing: RET
unlnk
ret
;Parsing: MAKESPACE 0
;Parsing: MAKEPARAM 3
;Parsing: Generating code for function ifdiv
;Parsing: LABEL ifdiv
label ifdiv
link 0
;Parsing: LINK
;Parsing: LABEL LABEL2
label LABEL2
;Parsing: WRITEF $P0
sys writer $8
;Parsing: WRITES divide
sys writes divide
;Parsing: WRITEF $P1
sys writer $7
;Parsing: WRITES plus
sys writes plus
;Parsing: WRITEF multiplier
sys writer multiplier
;Parsing: WRITES equal
sys writes equal
;Parsing: DIVF $P0 $P1 $T2
move $8 r4
divr $7 r4
;Parsing: ADDF $T2 multiplier $T3
move r4 r5
addr multiplier r5
;Parsing: STOREF $T3 $P0
move r5 $8
;Parsing: WRITEF $P0
sys writer $8
;Parsing: WRITES eol
sys writes eol
;Parsing: STOREI 1 $T4
move 1 r6
;Parsing: SUBI $P2 $T4 $T5
move $6 r7
subi r6 r7
;Parsing: STOREI $T5 $P2
move r7 $6
;Parsing: STOREF 2.0 $T6
move 2.0 r8
;Parsing: DIVF $P1 $T6 $T7
move $7 r9
divr r8 r9
;Parsing: STOREF $T7 $P1
move r9 $7
;Parsing: STOREI 0 $T8
move 0 r10
;Parsing: LEQ $P2 $T8 LABEL4
cmpi $6 r10
jle LABEL4
;Parsing: JUMP LABEL2
jmp LABEL2
;Parsing: LABEL LABEL4
label LABEL4
;Parsing: WRITES l2
sys writes l2
;Parsing: WRITES equal
sys writes equal
;Parsing: WRITEF $P0
sys writer $8
;Parsing: WRITES eol
sys writes eol
;Parsing: STOREF $P0 $R
move $8 r11
move r11 $9
;Parsing: RET
unlnk
ret
;Parsing: MAKESPACE 3
;Parsing: MAKEPARAM 0
;Parsing: Generating code for function main
;Parsing: LABEL main
label main
link 3
;Parsing: LINK
;Parsing: STOREI 9 $T9
move 9 r12
;Parsing: STOREF $T9 multiplier
move r12 multiplier
;Parsing: STOREI 8 $T10
move 8 r13
;Parsing: STOREI 7 $T11
move 7 r14
;Parsing: STOREI 5 $T12
move 5 r15
;Parsing: PUSH
push
;Parsing: PUSH $T10
push r13
;Parsing: PUSH $T11
push r14
;Parsing: PUSH $T12
push r15
;Parsing: JSR ifminus
push r0
push r1
push r2
push r3
jsr ifminus
pop r3
pop r2
pop r1
pop r0
;Parsing: POP
pop
;Parsing: POP
pop
;Parsing: POP
pop
;Parsing: POP $T13
pop r16
;Parsing: STOREF 18.0 $T14
move 18.0 r17
;Parsing: STOREF 7.8 $T15
move 7.8 r18
;Parsing: STOREI 8 $T16
move 8 r19
;Parsing: PUSH
push
;Parsing: PUSH $T14
push r17
;Parsing: PUSH $T15
push r18
;Parsing: PUSH $T16
push r19
;Parsing: JSR ifdiv
push r0
push r1
push r2
push r3
jsr ifdiv
pop r3
pop r2
pop r1
pop r0
;Parsing: POP
pop
;Parsing: POP
pop
;Parsing: POP
pop
;Parsing: POP $T17
pop r20
;Parsing: MULTI $T13 $T17 $T18
move r16 r21
muli r20 r21
;Parsing: STOREF $T18 $L2
move r21 $-1
;Parsing: WRITEF $L2
sys writer $-1
;Parsing: STOREI 0 $T19
move 0 r22
;Parsing: STOREI $T19 $R
move r22 r23
move r23 $6
;Parsing: RET
unlnk
ret
end
